kashidashi.local {
	# Enable automatic HTTPS with self-signed certificate for local development
	tls internal

	# Backend API - serve at /api
	handle_path /api/* {
		reverse_proxy backend:3000
	}

	# phpMyAdmin - serve at /phpmyadmin
	handle_path /phpmyadmin/* {
		reverse_proxy phpmyadmin:80
	}

	# Everything else goes to frontend (Vite dev server)
	# This includes /app, /@vite/*, /src/*, /node_modules/*, etc.
	handle {
		reverse_proxy frontend:5173 {
			header_up Host {host}
			header_up X-Real-IP {remote}
			header_up X-Forwarded-For {remote}
			header_up X-Forwarded-Proto {scheme}
		}
	}
}
